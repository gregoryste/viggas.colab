{% layout 'layouts/admin' %}
{% block content %}

<div class="admin__container">

    <!-- Formulario Carousel Com quem já construímos? -->
    <h2 class="default-title admin__title">Com quem já construímos?</h2>

    <form action="/admin/partners-text" method="POST" class="form-default mb-5">
        <div class="row mb-3">
            <div class="col-12">
                <textarea id="partnerText" name="partnerText">
                    {{ partnerText }}
                </textarea>
            </div>
        </div>
        <button type="submit" class="form-default__button default-button">Salvar</button>
    </form>

    <!-- Formulario Carousel Parceiros -->
    <h2 class="default-title admin__title">Parceiros</h2>

    <div class="row">
        <div class="col-12 col-lg-4">
<form action="{% if update %}/admin/partners-edit/{{ fields.id }}{% else %}/admin/partners{% endif %}" method="POST" class="form-default" enctype="multipart/form-data">
            <div class="form-default__item">
              <div class="form-default__container-exp">
                <label for="img" class="form-default__label">Imagem:</label>
              </div>
              <input type="file" name="img-partner" id="img-partner" accept="image/*">
              {% if fields.image.size > 0 and fields.image != "" %}
                <div class="form-default__item form-default__container-img">
                  <img src="{{ fields.image }}" alt="Parceiro imagem" class="form-default__image" width="100%" height="100%" loading="lazy">
                </div>
              {% endif %}
            </div>
            <div class="form-default__item">
                <input type="text" name="linkPartners" class="form-default__input" placeholder="Link: " value="{{ fields.link }}">
            </div>    
            <div class="form-default__item">
              <input type="text" name="ordem" class="form-default__input" placeholder="Ordem: " value="{{ fields.ordem }}">
            </div>
            <button type="submit" class="form-default__button default-button">{% if update %} Editar {% else %} Adicionar {% endif %}</button>
          </form>
        </div>
         
          <div class="table-viggas table-responsive-md col-12 col-lg-7 offset-lg-1 mt-5 mt-lg-0">
            <table class="table table-bordered">
              <thead>
                <tr>
                  <th>Imagens</th>
                  <th>Ações</th>
                </tr>
              </thead>
              <tbody>
                {% for partner in partners %}
                  <tr>
                    <th>
                      {% if partner.image and partner.image != "" %}
                        <div class="form-default__item form-default__container-img">
                            <img src="{{ partner.image  }}" alt="Parceiro" class="form-default__image" width="100%" height="100%" loading="lazy">
                        </div>
                    {% endif %}
                    </th>
                    <td>
                      <a href="/admin/partners-edit/{{ partner.id  }}" class="btn btn-secondary">Editar</a>
                      <a href="/admin/partners-delete/{{ partner.id }}" type="button" class="btn btn-danger">Excluir</a>
                    </td>
                  </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
      </div>
</div>
{% endblock %}